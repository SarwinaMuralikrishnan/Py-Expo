import streamlit as st

def check_winner(board, player):

        for i in range(3):
                if all([board[i][j] == player for j in range(3)]) or \
                           all([board[j][i] == player for j in range(3)]):
                                       return True
                                           if board[0][0] == player and board[1][1] == player and board[2][2] == player:
                                                   return True
                                                       if board[0][2] == player and board[1][1] == player and board[2][0] == player:
                                                               return True
                                                                   return False

                                                                   def is_full(board):
                                                                       for row in board:
                                                                               if ' ' in row:
                                                                                           return False
                                                                                               return True

                                                                                               
                                                                                               def play_game():
                                                                                                   
                                                                                                       if 'board' not in st.session_state:
                                                                                                               st.session_state.board = [[' ' for _ in range(3)] for _ in range(3)]
                                                                                                                       st.session_state.current_player = 'X'

                                                                                                                           
                                                                                                                               st.write("### Tic-Tac-Toe Game")
                                                                                                                                   for row in range(3):
                                                                                                                                           cols = [st.button(st.session_state.board[row][col], key=f'{row}_{col}', on_click=make_move, args=(row, col)) for col in range(3)]
                                                                                                                                               
                                                                                                                                        
                                                                                                                                                       def make_move(row, col):
                                                                                                                                                               if st.session_state.board[row][col] == ' ':
                                                                                                                                                                           st.session_state.board[row][col] = st.session_state.current_player

                                                                                                                                                                                    
                                                                                                                                                                                                   if check_winner(st.session_state.board, st.session_state.current_player):
                                                                                                                                                                                                                   st.write(f"**Player {st.session_state.current_player} wins!**")
                                                                                                                                                                                                                                   reset_game()
                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                           elif is_full(st.session_state.board):
                                                                                                                                                                                                                                                                           st.write("It's a draw!")
                                                                                                                                                                                                                                                                                           reset_game()
                                                                                                                                                                                                                                                                                                       else:
                                                                                                                                                                                                                                                                                                                       
                                                                                                                                                                                                                                                                                                                                       st.session_state.current_player = 'O' if st.session_state.current_player == 'X' else 'X'

                                                                                                                                                                                                                                                                                                                                        
                                                                                                                                                                                                                                                                                                                                               def reset_game():
                                                                                                                                                                                                                                                                                                                                                       if st.button('Play Again'):
                                                                                                                                                                                                                                                                                                                                                                   st.session_state.board = [[' ' for _ in range(3)] for _ in range(3)]
                                                                                                                                                                                                                                                                                                                                                                               st.session_state.current_player = 'X'

                                                                                                                                                                                                                                                                                                                                                                               
                                                                                                                                                                                                                                                                                                                                                                               if __name__ == "__main__":
                                                                                                                                                                                                                                                                                                                                                                                   play_game()